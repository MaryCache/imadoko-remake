# OpenAPI 3.0 Specification
# Single Source of Truth for imadoko-rota2
openapi: 3.0.3
info:
  title: Imadoko Rota API
  description: ãƒãƒ¬ãƒ¼ãƒœãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®APIä»•æ§˜
  version: 1.0.0
  contact:
    name: MaryCache
    url: https://github.com/MaryCache/imadoko-remake

servers:
  - url: http://localhost:8080/api
    description: Local Development Server
  - url: https://imadoko-rota-api.example.com/api
    description: Production Server

# ========================================
# âš™ï¸ å…±é€šå®šæ•°å®šç¾©ï¼ˆSingle Source of Truthï¼‰
# ========================================
components:
  schemas:
    # ãƒãƒ¼ãƒ 
    Team:
      type: object
      required:
        - id
        - teamName
        - players
      properties:
        id:
          type: integer
          format: int64
          example: 1
        teamName:
          type: string
          minLength: 1
          maxLength: 100
          example: "æ±äº¬ãƒãƒ¬ãƒ¼ãƒœãƒ¼ãƒ«ã‚¯ãƒ©ãƒ–"
        players:
          type: array
          items:
            $ref: '#/components/schemas/Player'
          minItems: 1
          maxItems: 14  # ğŸ¯ ã“ã“ãŒå”¯ä¸€ã®å®šç¾©ç®‡æ‰€
          description: é¸æ‰‹ãƒªã‚¹ãƒˆï¼ˆ1ï½14åï¼‰

    # ãƒãƒ¼ãƒ ä½œæˆ/æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    TeamRequest:
      type: object
      required:
        - teamName
        - players
      properties:
        teamName:
          type: string
          minLength: 1
          maxLength: 100
          example: "æ±äº¬ãƒãƒ¬ãƒ¼ãƒœãƒ¼ãƒ«ã‚¯ãƒ©ãƒ–"
        players:
          type: array
          items:
            $ref: '#/components/schemas/PlayerRequest'
          minItems: 1
          maxItems: 14  # ğŸ¯ ã“ã“ã‚‚è‡ªå‹•çš„ã«åŒæœŸ
          description: é¸æ‰‹ãƒªã‚¹ãƒˆï¼ˆ1ï½14åï¼‰

    # é¸æ‰‹
    Player:
      type: object
      required:
        - id
        - firstName
        - lastName
        - position
      properties:
        id:
          type: integer
          format: int64
          example: 1
        firstName:
          type: string
          minLength: 1
          maxLength: 30
          example: "å¤ªéƒ"
        lastName:
          type: string
          minLength: 1
          maxLength: 30
          example: "å±±ç”°"
        position:
          type: string
          enum:
            - S    # ã‚»ãƒƒã‚¿ãƒ¼
            - WS   # ã‚¦ã‚¤ãƒ³ã‚°ã‚¹ãƒ‘ã‚¤ã‚«ãƒ¼
            - MB   # ãƒŸãƒ‰ãƒ«ãƒ–ãƒ­ãƒƒã‚«ãƒ¼
            - OP   # ã‚ªãƒã‚¸ãƒƒãƒˆ
            - L    # ãƒªãƒ™ãƒ­
          example: "WS"

    # é¸æ‰‹ä½œæˆ/æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    PlayerRequest:
      type: object
      required:
        - firstName
        - lastName
        - position
      properties:
        firstName:
          type: string
          minLength: 1
          maxLength: 30
          example: "å¤ªéƒ"
        lastName:
          type: string
          minLength: 1
          maxLength: 30
          example: "å±±ç”°"
        position:
          type: string
          enum: [S, WS, MB, OP, L]
          example: "WS"

    # ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
    ErrorResponse:
      type: object
      properties:
        message:
          type: string
          example: "ãƒãƒ¼ãƒ åã¯å¿…é ˆã§ã™"
        timestamp:
          type: string
          format: date-time
          example: "2025-11-21T10:30:00Z"

  # ========================================
  # ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å®šç¾©ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰
  # ========================================
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWTèªè¨¼ï¼ˆå°†æ¥å®Ÿè£…äºˆå®šï¼‰

# ========================================
# ğŸ“¡ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
# ========================================
paths:
  /teams:
    get:
      summary: ãƒãƒ¼ãƒ ä¸€è¦§å–å¾—
      operationId: getAllTeams
      tags:
        - Teams
      responses:
        '200':
          description: æˆåŠŸ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Team'
        '500':
          description: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    post:
      summary: ãƒãƒ¼ãƒ ä½œæˆ
      operationId: createTeam
      tags:
        - Teams
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeamRequest'
      responses:
        '201':
          description: ä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '400':
          description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /teams/{id}:
    get:
      summary: ãƒãƒ¼ãƒ å–å¾—
      operationId: getTeamById
      tags:
        - Teams
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '404':
          description: ãƒãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      summary: ãƒãƒ¼ãƒ æ›´æ–°
      operationId: updateTeam
      tags:
        - Teams
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeamRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        '400':
          description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ãƒãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      summary: ãƒãƒ¼ãƒ å‰Šé™¤
      operationId: deleteTeam
      tags:
        - Teams
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '204':
          description: å‰Šé™¤æˆåŠŸ
        '404':
          description: ãƒãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

tags:
  - name: Teams
    description: ãƒãƒ¼ãƒ ç®¡ç†API
